'''
알고 스탁

알고 스탁은 주식 시장 거래 데이터 학습, 최적에 가까운 수익.
알고 스탁이 거래한 주식들과 해당 주식들의 매 월별 가격 제시.
알고스탁이 낸 수익이 이론 상 실현 가능한 최대 이익에 얼마나 근접하는가?
입력으로 알고 스탁이 거래했던 종목들의 과거 데이터 제시.
이론 상 실현 가능한 최대 수익 계산.

입력
테케T
예치금 Ms, 월 별 불입금액 Ma 제시.
종목 수 N, 데이터 기간 L 제시.
N개 줄에 월 별 주식 가격 정보 입력.

출력
#테케T 과거 데이터로 거래하여 얻을 수 있는 최대 수익금.
'''


def kns():
    global dp, l, n, dp, Ma, Ms
    i = 0
    val = Ms
    while i+1 <= l:
        li = []
        for j in range(n):
            if tbl[j][i+1]-tbl[j][i] > 0:
                li.append((tbl[j][i+1]-tbl[j][i], tbl[j][i]))
        rdp = [0]*(val+1)
        while li:
            bnf, cost = li.pop()
            for ik in range(cost, val+1):
                if ik-cost >= 0:
                    rdp[ik] = max(rdp[ik], rdp[ik-cost]+bnf)
        dp[i+1] = max(dp[i+1], dp[i]+rdp[-1]+Ma)
        i+=1
        val = dp[i]

for tc in range(1, int(input())+1):
    Ms, Ma = map(int, input().split())
    n, l = map(int, input().split())
    tbl = [list(map(int, input().split())) for _ in range(n)]
    dp = [Ms for _ in range(l+1)]
    kns()
    print(f"#{tc} {dp[-1]-(Ms+Ma*l)}")

'''
448
465
906
1847
1094
'''
'''
5
300 60
3 8
135 120 111 144 170 170 171 173 169 
156 150 144 144 144 150 150 150 147 
195 180 165 150 141 172 185 190 159 
400 0
5 8
180 180 180 150 120 150 180 180 180 
315 315 315 300 300 300 300 300 315 
219 282 255 255 255 219 219 219 219 
228 222 204 246 255 228 228 228 228 
120 150 120 120 120 120 120 120 120 
450 0
7 10
405 405 345 345 315 345 345 345 345 405 405 
210 210 210 240 240 210 210 210 210 210 210 
270 225 225 225 225 225 225 292 270 270 270 
120 135 135 135 135 120 120 120 120 120 120 
210 210 210 210 210 210 210 210 210 270 225 
180 180 180 180 180 180 180 180 180 180 210 
180 126 120 120 150 150 150 180 180 180 180 
500 0
5 12
470 470 510 663 861 1119 1187 1210 1230 1230 1260 1270 1280 
1490 1490 1160 1200 1200 1200 1200 1410 1650 1860 1860 1860 1860 
260 270 260 260 260 260 260 260 280 280 280 280 280 
1420 1660 1660 1260 1260 1260 1260 1270 1270 1270 1270 1270 1270 
800 900 980 1040 1140 1240 1340 1340 1440 1540 1640 1880 2000 
600 40
8 8
125 125 125 125 125 115 110 110 125 
512 616 616 616 616 616 616 616 616 
660 660 660 575 575 575 660 660 660 
345 345 448 540 540 515 515 450 395 
425 425 425 425 425 500 500 500 425 
100 100 100 100 100 110 110 100 100 
870 850 906 906 906 906 860 860 870 
305 305 305 305 260 295 305 305 305 
'''