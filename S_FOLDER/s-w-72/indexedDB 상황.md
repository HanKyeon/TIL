# mdn IndexedDB API

- 사용을 익히는데 필요한 시간 소요 (query 관련)
- mdn이 제공한 기능들 전부 자유롭게 사용 가능.
- 타입추론 / 제네릭으로 indexedDB 타입 지정 가능

## 현상황

- mdn api를 필요한 기능 묶음을 class로 생성.
- idb lib을 사용했을 때의 편리함과 직관성이 더 유리하다고 판단하여 중지

## 장점

1. 확장성이 가장 좋음.
   - 기본 제공 기능을 사용하는 만큼 원하는 기능을 만들고 자유로운 쿼리를 만들 때 사용이 편리
2. 에러 핸들링이 편리
   - mdn api 기반인 만큼 자료가 잘 정리되어 있음.
3. 타입추론 / 제네릭으로 indexedDB 타입 지정 가능
   - class를 생성할 때 generic type을 받아 사용하기 편리하게 제작이 가능

## 단점

1. 사용하는 사람이 IDB 쿼리 사용법 등을 어느정도 숙지해야함.
   - mdn에서의 사용법을 알아야 원하는 값을 가져오기가 편리함.
2. 데이터 암호화 / 복호화를 직접 해야함.
   - 해당 방법을 정하고 만드는 것도 소스가 들 것으로 보임.
3. class를 만들고 필요한 기능을 추가할 때 시간이 소요될 것으로 보임

---

# idb lib

- indexedDB가 wrapping 해둔 함수를 통해 사용.
- mdn idb보다 사용하고 확장하는 부분이 편리함.
- 사용에 필요한 대부분의 api를 제공
- 타입추론 / 제네릭으로 indexedDB 타입 지정 가능

## 현상황

- 현재 class로 wrapping하여 생성.
- 데이터 암호화 기능 추가 고려로 인해 중지

## 장점

1. 러닝커브가 쉬운 편이라 전사 사용이 편리할 것으로 보임
   - 직관적이며 필요한 쿼리들을 편리하게 제공
2. 대부분의 기능이 wrapping되어 있음.
   - 특정 index로 값을 찾거나 하는 등의 작업을 편리하게 이용 가능.
   - 사용 lib을 만드는 시간이 줄어들 것으로 보임.
3. 타입추론 / 제네릭으로 indexedDB 타입 지정 가능
   - class를 생성할 때 generic type을 받아 사용하기 편리하게 제작이 가능

## 단점

1. 데이터 암호화 / 복호화를 직접 해야함.

---

# Dexie lib

- Dexie가 wrapping 해둔 Dexie class를 통해 사용
- dexie-encrypt lib을 통해 데이터 암호화 가능
- 암호화 key 역시 encrypt를 통해 저장

## 현상황

- data scheme이 어느정도 나온 상황에서 api를 제공하는 것이 가능. (타입추론 / 제네릭으로 해결 불가)
- scheme 없이 사용하도록 만들 수 있으나, 사용 위치에서 boiler plate를 직접 작성해야하기에 소스가 많이 들 것으로 예상

## 장점

1. dexie-encrypt lib을 통해 데이터 암복호화가 편리. 개발 시간 감소
   - idb와 마찬가지로 대부분의 기능이 wrapping된 상태임.
2. data scheme이 제시된 상황에서의 사용법이 직관적이고 강력함.
   - 어떤 table을 갖고 있는지 명확히 확인하고 명시할수록 강력한 장점을 가짐.
3. data를 table 형태로 제공하기에 이해가 직관적임.
   - table(tableName).add(), where(tableName | value | keyVal | ...) 등 사용법이 다양하고 직관적임.

## 단점

1. data scheme이 어느정도 나온 상황에서 api를 제공하는 것이 가능. (타입추론 / 제네릭으로 해결 불가)
2. 만약 data scheme 없이 사용할 수 있도록 제작하는 경우, 직관성이 떨어짐.
3. scheme 없이 접근하도록 할 경우 ts error가 나지만 적용은 잘 됨. (js로 짜는 것이 편리할 수 있으나, 에러 핸들링 면에서 단점을 가짐.)
