
# 20230505

- 어제 배운 것

1. SSG에서도 유저 정보를 토큰을 통해 받아서 불러올 수 있다. 하지만, 그것이 제약이 걸릴 때가 있다는 것 같음.
2. 쿠키를 통해 관리를 할 경우 공통적으로 호출이 가능하다고 한다.
3. 근데 스시같이 access와 refresh가 함께 필요한 경우엔 어떻게 해야 할까?
    - 고민해봤을 때 떠오르는 몇가지 해결책이 있다.
    - 첫째로 젤 간단한건 쿠키에 refresh로만 access 재발급이 되도록 하는 것.
    - 둘째로 만일 refresh가 쿠키에 저장되어 있을 것이라고 한다면 (refresh에는 유저 관련 정보가 없다고 할 때.) access를 로컬 혹은 세션에 따로 저장하고 있다가 가져다 쓰는 것.
    - 해당 부분은 ServerSideProps에서 사용하는 axios 요청이 잘 될 지는 모르겠지만, 분명히 가능한 일이라 생각함.
    - 혹은 반대로, 만료가 짧은 access를 쿠키에 담고 refresh를 스토리지에 저장하는 것.

---

훅의 기본 사용법. 알고 있지만 다시 적어보자.

- 함수형 컴포넌트 내의 최상위에서만 호출해야 한다.
- 그래야 호출 순서가 보장이 되고, conditional하게 즉, 조건 및 반복으로 hook을 호출하면 안된다. 당연하게도 함수 내 함수에서도 호출이 안된다.
- hook으로 사용하기 위해 use를 함수 명 앞에 prefix로 갖고 있어야 한다.







