
# 20230130

도커 위에 올린 컨테이너.

컨테이너 기반의 오픈소스 가상화 플랫폼.

도커가 이미지라는 실행 환경 등을 합쳐서 컨테이너로 이미지를 만들어 준다.
그 이미지를 통해 만들게 된다. 추상화해서 동일하게 실행 가능 하도록 해준다.

도커는 코드 운영체제 등을 이미지로 만들어서 저장해주고, 도커에서 실행해준다.
도커 파일이 있다. 이미지를 생성하기 위한 용도로 코드가 있다.
웹 훅이 일어났을 때 React의 이미지를 만들어 달라고 요청해야 한다.
이미지를 생성하기 위한 용도로 사용한다.

컨테이너는 인메모리 파일 시스템이기에 컨테이너가 날라가면 사라진다. db를 도커에 올리면 로컬에 마운트 해주는 것이 좋다. 필요한 데이터가 있다면 참조하고 저장도 로컬에 한다. mapping만 다시 걸어주면 data를 다시 쓸 수 있도록.

도커 컴포즈 : 노랑 테두리로 컨테이너를 묶어둔 그룹.
- 다중 컨테이너로 구성된 앱을 정의하고 생명주기를 쉽게 관리 할 수 있도록 해주는 툴이다.
- 파일 작성 규칙을 숙지해야 한다.
- 도커 컴포즈 문의 경우 들여쓰기를 잘 작성하고 지켜야 한다.
- 볼륨, 포트, 암호 등 기재 가능.

엔진엑스 : 앞단엔 클라, 뒷단엔 프/백과 연결. 경량 웹 서버 소프트웨어.
- 정적인 파일을 클라에게 응답하는 역할. Reverse Proxy 기능 제공.
- 리버스 프록시는 개념들을 많이 알아야 하는데 간단히 말하면 80포트와 443 포트를 받을 것이다.
- 보안으로 인해 NginX라는 대리자를 만들어서 클라가 직접 접근하는 것이 아니라 간접적으로 요청하도록 하게 하는 것이다.
- 인증된 https 쓰는 이유는 보안이다. 사용자가 http로 들어오면 https로 리다이렉트 해준다.
- 443 포트로 들어왔을 때 어디로 보내라. Proxy Path로 나눠서 실행.
- 로드 밸런싱은 따로 안했으나, 백엔드의 업스트림을 써서 백으로 가게 하면 리스트 콘이라는 명령어로 가장 부하가 낮은 곳으로 보내라고 해준다. 기재하지 ㅇ낳으면 라운드 로빈으로 순서대로 간다.

젠킨스 : 깃랩과 프/백이 연결.
- 빌드/배포 자동화. CI CD를 도와주는 툴이다.
- 컴파일 오류 검출 + 테스트 등의 많은 기능이 있다.
- 깃랩에서 push나 merge를 하면 젠킨스가 빌드를 하고 docker 이미지를 만들고 container까지 생성해준다.
- 기회가 된다면 자동화라도 해보는 것을 추천한다.






