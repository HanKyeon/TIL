# 테스트 관련 큰 정리

1. 우선적으로 알고 있는 테스트의 경우, 큰 경우를 빠르게 확인 할 수 있어서 유용하다고 알고 있음
2. 대중적인 테스트 시나리오, 혹은 목표하는 바를 잡아서 그 시나리오 코드를 작성하여 확인하는 용도라고 암
3. 대표적으로 `testing-library`, `jest`, `vitest` 이렇게 있다고 알고 있음.
4. `testing-library`의 경우 컴포넌트 렌더링 관련된 테스트를 진행할 때 좋다고 알고 있음.
5. `jest`의 경우 `Jasmine` 기반으로 구축되어 있기에 mocking에 대한 기본 지원 같은 것을 제공
6. `vitest`는 `vite`에서 만든 테스팅 툴로 알고 있으며 이번에 처음 작성해봄

- [참고1: vitest vs jest](https://saucelabs.com/resources/blog/vitest-vs-jest-comparison)

## Jest

- `jest`는 개발자가 주어진 테스트 범위 내에 존재하지 않는 object에 대해 테스트를 실행할 수 있는 api가 내장되어 있다.
- 서로 다른 두 테스트의 결과를 비교하려는 경우를 위해 스냅샷 기능을 제공하며 병렬 테스트를 지원하므로 일련의 테스트를 완료하는데 걸리는 시간이 줄어든다.
- `jest`를 사용하면 최소한의 설정과 구성으로 테스트가 가능하다.
- 장점1. 심플함 : `jest`는 JS코드에서 구성이 필요 없이 작동하도록 설계되어 있다. 즉, 대부부느이 코드 베이스에 대해 약간의 설정만으로 테스트 실행이 가능하다.
- 장점2. 범용성 : `jest`는 인기있는 모든 JS framework와 호환이 가능합니다. JS가 어떻게 동작하던 `jest`가 지원할 확률이 높다.
- 장점3. 문서가 잘 되어있음 : 2011년부터 쌓인 데이터와 메타가 적극적으로 밀어주었기에 사용자가 많다. 그래서 좋은 레퍼런스들이 많으며 구글링이 쉽고 강력하다.
- 쉬운 모킹 구현과 같은 고급 기능에 대한 액세스도 제공한다.

## vitest

- `vitest`는 JS 유닛 테스트 프레임워크이다. JS 기반 웹 앱을 관리하고 구축하는 스캡폴딩 툴인 `vite`를 보완하기 위해 만들어졌다.
- `vite` 없이 `vitest`를 사용하는 것이 가능하지만, 그렇게 할 경우 테스트 구성을 위해 더 많은 시간이 걸린다. `vitest`를 사용하여 `vite`를 통해 관리하는 코드를 테스트하는 경우, `vite`와 밀접하게 연관되어 있기에 대부분의 테스트 설정이 자동으로 수행된다.
- `vitest`는 대부분의 `jest`의 API와 호환이 된다. 즉, `jest`용으로 개발된 대부분의 테스트는 `vitest`를 토앻 사용하여 실행할 수 있으며 딱히 변경이 없다.
- `vitest`는 최신 테스트 프레임워크에서 기대할 수 있는 거의 모든 기능을 제공한다는 점에서 `jest`와 유사하지만, `vite`와 함께 쓰일 경우 속도가 굉장히 빠르며, 단순하다는 강점을 가지고 있다.
- `vite`와 똑같이 빠르다는 장점을 가지고 있다. 물론 테스트를 뭘 하냐에 따라 달라지지만, 일반적으로 `vitest`가 `jest`를 사용한 테스트보다 4배 이상 빠르게 실행된 사례가 있다.
- 많은 테스트 시나리오에서 `vitest`는 테스트 프레임워크 중 가장 빠를 가능성이 높다.
- `vite`와 함께 사용할 경우, 간단한 테스트 설정 및 관리 경험이 가능하다는 장점이 있다. `vite`로 프로젝트를 구성한 경우, `vitest`에 필요한 구성, 플러그인, 기타 요소들을 재사용 할 수 있다.

## jest vs vitest

- 두 프레임 워크 모두 js 테스트로써 뛰어나다며 다른 프레임워크와의 호환성을 염두하여 설계되었다. 또한 둘 다 테스트 자동화를 위해 사용될 수 있다.
- 하지만, `jest`와 `vitest`는 작동 방식의 특정 차이로 인해 다소 다른 결과를 낼 수 있다.

- `vitest`는 `vite`와 사용되는 것이 이상적이다. 그렇기에 `jest`가 조금 더 범용성이 좋다는 것이 지론이다.
- 속도 면에서는 일반적으로 `vitest`가 더 빠르다. 하지만 상황에 따라 다르다. 리소스가 풍부하거나(인프라에서 테스트) 제한된 로컬 리소스에서 많은 테스트를 실행하는 경우 소수 테스트만 실행하거나 빠른 테스트가 중요할 수 있다. 그런 경우에 `vitest`가 좋다.

- 모듈 관리 면에서는 `jest`와 `vitest`가 다르다.
- 전통적으로 모듈은 `cjs` 즉 `CommonJS`를 사용해왔으며, `jest` 역시 `cjs`를 사용하여 작동한다.
- `vitest`는 현대적인 방식인 `esm` 즉 `ECMAScriptModule`과 호환이 되도록 설계되어 있다.
- 테스트 관점에서 해당 부분은 상당히 중요한 요소가 될 수 있다. `cjs` 모듈을 사용한다면 `jest`가 호환성이 더 좋기에 `jest`로 테스트를 하는 것이 더 간단할 것이며, `esm`을 사용한다면 `vitest`가 호환성이 더 좋을 것이다.

## 결론

- 검색 및 정보 면에서 `jest`가 더 뛰어나다. 속도 면에서 `vitest`가 더 뛰어나다. `vitest` 역시 꾸준히 인기가 늘어나고 있지만 아직은 `jest`가 더 인기가 많다.
